{"ast":null,"code":"/*!\r\n * chartjs-plugin-datalabels v2.0.0\r\n * https://chartjs-plugin-datalabels.netlify.app\r\n * (c) 2017-2021 chartjs-plugin-datalabels contributors\r\n * Released under the MIT license\r\n */\nimport { isNullOrUndef, merge, toFont, resolve, toPadding, valueOrDefault, callback, isObject, each } from 'chart.js/helpers';\nimport { defaults as defaults$1, ArcElement, PointElement, BarElement } from 'chart.js';\n\nvar devicePixelRatio = function () {\n  if (typeof window !== 'undefined') {\n    if (window.devicePixelRatio) {\n      return window.devicePixelRatio;\n    } // devicePixelRatio is undefined on IE10\n    // https://stackoverflow.com/a/20204180/8837887\n    // https://github.com/chartjs/chartjs-plugin-datalabels/issues/85\n\n\n    var screen = window.screen;\n\n    if (screen) {\n      return (screen.deviceXDPI || 1) / (screen.logicalXDPI || 1);\n    }\n  }\n\n  return 1;\n}();\n\nvar utils = {\n  // @todo move this in Chart.helpers.toTextLines\n  toTextLines: function toTextLines(inputs) {\n    var lines = [];\n    var input;\n    inputs = [].concat(inputs);\n\n    while (inputs.length) {\n      input = inputs.pop();\n\n      if (typeof input === 'string') {\n        lines.unshift.apply(lines, input.split('\\n'));\n      } else if (Array.isArray(input)) {\n        inputs.push.apply(inputs, input);\n      } else if (!isNullOrUndef(inputs)) {\n        lines.unshift('' + input);\n      }\n    }\n\n    return lines;\n  },\n  // @todo move this in Chart.helpers.canvas.textSize\n  // @todo cache calls of measureText if font doesn't change?!\n  textSize: function textSize(ctx, lines, font) {\n    var items = [].concat(lines);\n    var ilen = items.length;\n    var prev = ctx.font;\n    var width = 0;\n    var i;\n    ctx.font = font.string;\n\n    for (i = 0; i < ilen; ++i) {\n      width = Math.max(ctx.measureText(items[i]).width, width);\n    }\n\n    ctx.font = prev;\n    return {\n      height: ilen * font.lineHeight,\n      width: width\n    };\n  },\n\n  /**\r\n   * Returns value bounded by min and max. This is equivalent to max(min, min(value, max)).\r\n   * @todo move this method in Chart.helpers.bound\r\n   * https://doc.qt.io/qt-5/qtglobal.html#qBound\r\n   */\n  bound: function bound(min, value, max) {\n    return Math.max(min, Math.min(value, max));\n  },\n\n  /**\r\n   * Returns an array of pair [value, state] where state is:\r\n   * * -1: value is only in a0 (removed)\r\n   * *  1: value is only in a1 (added)\r\n   */\n  arrayDiff: function arrayDiff(a0, a1) {\n    var prev = a0.slice();\n    var updates = [];\n    var i, j, ilen, v;\n\n    for (i = 0, ilen = a1.length; i < ilen; ++i) {\n      v = a1[i];\n      j = prev.indexOf(v);\n\n      if (j === -1) {\n        updates.push([v, 1]);\n      } else {\n        prev.splice(j, 1);\n      }\n    }\n\n    for (i = 0, ilen = prev.length; i < ilen; ++i) {\n      updates.push([prev[i], -1]);\n    }\n\n    return updates;\n  },\n\n  /**\r\n   * https://github.com/chartjs/chartjs-plugin-datalabels/issues/70\r\n   */\n  rasterize: function rasterize(v) {\n    return Math.round(v * devicePixelRatio) / devicePixelRatio;\n  }\n};\n\nfunction orient(point, origin) {\n  var x0 = origin.x;\n  var y0 = origin.y;\n\n  if (x0 === null) {\n    return {\n      x: 0,\n      y: -1\n    };\n  }\n\n  if (y0 === null) {\n    return {\n      x: 1,\n      y: 0\n    };\n  }\n\n  var dx = point.x - x0;\n  var dy = point.y - y0;\n  var ln = Math.sqrt(dx * dx + dy * dy);\n  return {\n    x: ln ? dx / ln : 0,\n    y: ln ? dy / ln : -1\n  };\n}\n\nfunction aligned(x, y, vx, vy, align) {\n  switch (align) {\n    case 'center':\n      vx = vy = 0;\n      break;\n\n    case 'bottom':\n      vx = 0;\n      vy = 1;\n      break;\n\n    case 'right':\n      vx = 1;\n      vy = 0;\n      break;\n\n    case 'left':\n      vx = -1;\n      vy = 0;\n      break;\n\n    case 'top':\n      vx = 0;\n      vy = -1;\n      break;\n\n    case 'start':\n      vx = -vx;\n      vy = -vy;\n      break;\n\n    case 'end':\n      // keep natural orientation\n      break;\n\n    default:\n      // clockwise rotation (in degree)\n      align *= Math.PI / 180;\n      vx = Math.cos(align);\n      vy = Math.sin(align);\n      break;\n  }\n\n  return {\n    x: x,\n    y: y,\n    vx: vx,\n    vy: vy\n  };\n} // Line clipping (Cohen–Sutherland algorithm)\n// https://en.wikipedia.org/wiki/Cohen–Sutherland_algorithm\n\n\nvar R_INSIDE = 0;\nvar R_LEFT = 1;\nvar R_RIGHT = 2;\nvar R_BOTTOM = 4;\nvar R_TOP = 8;\n\nfunction region(x, y, rect) {\n  var res = R_INSIDE;\n\n  if (x < rect.left) {\n    res |= R_LEFT;\n  } else if (x > rect.right) {\n    res |= R_RIGHT;\n  }\n\n  if (y < rect.top) {\n    res |= R_TOP;\n  } else if (y > rect.bottom) {\n    res |= R_BOTTOM;\n  }\n\n  return res;\n}\n\nfunction clipped(segment, area) {\n  var x0 = segment.x0;\n  var y0 = segment.y0;\n  var x1 = segment.x1;\n  var y1 = segment.y1;\n  var r0 = region(x0, y0, area);\n  var r1 = region(x1, y1, area);\n  var r, x, y; // eslint-disable-next-line no-constant-condition\n\n  while (true) {\n    if (!(r0 | r1) || r0 & r1) {\n      // both points inside or on the same side: no clipping\n      break;\n    } // at least one point is outside\n\n\n    r = r0 || r1;\n\n    if (r & R_TOP) {\n      x = x0 + (x1 - x0) * (area.top - y0) / (y1 - y0);\n      y = area.top;\n    } else if (r & R_BOTTOM) {\n      x = x0 + (x1 - x0) * (area.bottom - y0) / (y1 - y0);\n      y = area.bottom;\n    } else if (r & R_RIGHT) {\n      y = y0 + (y1 - y0) * (area.right - x0) / (x1 - x0);\n      x = area.right;\n    } else if (r & R_LEFT) {\n      y = y0 + (y1 - y0) * (area.left - x0) / (x1 - x0);\n      x = area.left;\n    }\n\n    if (r === r0) {\n      x0 = x;\n      y0 = y;\n      r0 = region(x0, y0, area);\n    } else {\n      x1 = x;\n      y1 = y;\n      r1 = region(x1, y1, area);\n    }\n  }\n\n  return {\n    x0: x0,\n    x1: x1,\n    y0: y0,\n    y1: y1\n  };\n}\n\nfunction compute$1(range, config) {\n  var anchor = config.anchor;\n  var segment = range;\n  var x, y;\n\n  if (config.clamp) {\n    segment = clipped(segment, config.area);\n  }\n\n  if (anchor === 'start') {\n    x = segment.x0;\n    y = segment.y0;\n  } else if (anchor === 'end') {\n    x = segment.x1;\n    y = segment.y1;\n  } else {\n    x = (segment.x0 + segment.x1) / 2;\n    y = (segment.y0 + segment.y1) / 2;\n  }\n\n  return aligned(x, y, range.vx, range.vy, config.align);\n}\n\nvar positioners = {\n  arc: function arc(el, config) {\n    var angle = (el.startAngle + el.endAngle) / 2;\n    var vx = Math.cos(angle);\n    var vy = Math.sin(angle);\n    var r0 = el.innerRadius;\n    var r1 = el.outerRadius;\n    return compute$1({\n      x0: el.x + vx * r0,\n      y0: el.y + vy * r0,\n      x1: el.x + vx * r1,\n      y1: el.y + vy * r1,\n      vx: vx,\n      vy: vy\n    }, config);\n  },\n  point: function point(el, config) {\n    var v = orient(el, config.origin);\n    var rx = v.x * el.options.radius;\n    var ry = v.y * el.options.radius;\n    return compute$1({\n      x0: el.x - rx,\n      y0: el.y - ry,\n      x1: el.x + rx,\n      y1: el.y + ry,\n      vx: v.x,\n      vy: v.y\n    }, config);\n  },\n  bar: function bar(el, config) {\n    var v = orient(el, config.origin);\n    var x = el.x;\n    var y = el.y;\n    var sx = 0;\n    var sy = 0;\n\n    if (el.horizontal) {\n      x = Math.min(el.x, el.base);\n      sx = Math.abs(el.base - el.x);\n    } else {\n      y = Math.min(el.y, el.base);\n      sy = Math.abs(el.base - el.y);\n    }\n\n    return compute$1({\n      x0: x,\n      y0: y + sy,\n      x1: x + sx,\n      y1: y,\n      vx: v.x,\n      vy: v.y\n    }, config);\n  },\n  fallback: function fallback(el, config) {\n    var v = orient(el, config.origin);\n    return compute$1({\n      x0: el.x,\n      y0: el.y,\n      x1: el.x,\n      y1: el.y,\n      vx: v.x,\n      vy: v.y\n    }, config);\n  }\n};\nvar rasterize = utils.rasterize;\n\nfunction boundingRects(model) {\n  var borderWidth = model.borderWidth || 0;\n  var padding = model.padding;\n  var th = model.size.height;\n  var tw = model.size.width;\n  var tx = -tw / 2;\n  var ty = -th / 2;\n  return {\n    frame: {\n      x: tx - padding.left - borderWidth,\n      y: ty - padding.top - borderWidth,\n      w: tw + padding.width + borderWidth * 2,\n      h: th + padding.height + borderWidth * 2\n    },\n    text: {\n      x: tx,\n      y: ty,\n      w: tw,\n      h: th\n    }\n  };\n}\n\nfunction getScaleOrigin(el, context) {\n  var scale = context.chart.getDatasetMeta(context.datasetIndex).vScale;\n\n  if (!scale) {\n    return null;\n  }\n\n  if (scale.xCenter !== undefined && scale.yCenter !== undefined) {\n    return {\n      x: scale.xCenter,\n      y: scale.yCenter\n    };\n  }\n\n  var pixel = scale.getBasePixel();\n  return el.horizontal ? {\n    x: pixel,\n    y: null\n  } : {\n    x: null,\n    y: pixel\n  };\n}\n\nfunction getPositioner(el) {\n  if (el instanceof ArcElement) {\n    return positioners.arc;\n  }\n\n  if (el instanceof PointElement) {\n    return positioners.point;\n  }\n\n  if (el instanceof BarElement) {\n    return positioners.bar;\n  }\n\n  return positioners.fallback;\n}\n\nfunction drawRoundedRect(ctx, x, y, w, h, radius) {\n  var HALF_PI = Math.PI / 2;\n\n  if (radius) {\n    var r = Math.min(radius, h / 2, w / 2);\n    var left = x + r;\n    var top = y + r;\n    var right = x + w - r;\n    var bottom = y + h - r;\n    ctx.moveTo(x, top);\n\n    if (left < right && top < bottom) {\n      ctx.arc(left, top, r, -Math.PI, -HALF_PI);\n      ctx.arc(right, top, r, -HALF_PI, 0);\n      ctx.arc(right, bottom, r, 0, HALF_PI);\n      ctx.arc(left, bottom, r, HALF_PI, Math.PI);\n    } else if (left < right) {\n      ctx.moveTo(left, y);\n      ctx.arc(right, top, r, -HALF_PI, HALF_PI);\n      ctx.arc(left, top, r, HALF_PI, Math.PI + HALF_PI);\n    } else if (top < bottom) {\n      ctx.arc(left, top, r, -Math.PI, 0);\n      ctx.arc(left, bottom, r, 0, Math.PI);\n    } else {\n      ctx.arc(left, top, r, -Math.PI, Math.PI);\n    }\n\n    ctx.closePath();\n    ctx.moveTo(x, y);\n  } else {\n    ctx.rect(x, y, w, h);\n  }\n}\n\nfunction drawFrame(ctx, rect, model) {\n  var bgColor = model.backgroundColor;\n  var borderColor = model.borderColor;\n  var borderWidth = model.borderWidth;\n\n  if (!bgColor && (!borderColor || !borderWidth)) {\n    return;\n  }\n\n  ctx.beginPath();\n  drawRoundedRect(ctx, rasterize(rect.x) + borderWidth / 2, rasterize(rect.y) + borderWidth / 2, rasterize(rect.w) - borderWidth, rasterize(rect.h) - borderWidth, model.borderRadius);\n  ctx.closePath();\n\n  if (bgColor) {\n    ctx.fillStyle = bgColor;\n    ctx.fill();\n  }\n\n  if (borderColor && borderWidth) {\n    ctx.strokeStyle = borderColor;\n    ctx.lineWidth = borderWidth;\n    ctx.lineJoin = 'miter';\n    ctx.stroke();\n  }\n}\n\nfunction textGeometry(rect, align, font) {\n  var h = font.lineHeight;\n  var w = rect.w;\n  var x = rect.x;\n  var y = rect.y + h / 2;\n\n  if (align === 'center') {\n    x += w / 2;\n  } else if (align === 'end' || align === 'right') {\n    x += w;\n  }\n\n  return {\n    h: h,\n    w: w,\n    x: x,\n    y: y\n  };\n}\n\nfunction drawTextLine(ctx, text, cfg) {\n  var shadow = ctx.shadowBlur;\n  var stroked = cfg.stroked;\n  var x = rasterize(cfg.x);\n  var y = rasterize(cfg.y);\n  var w = rasterize(cfg.w);\n\n  if (stroked) {\n    ctx.strokeText(text, x, y, w);\n  }\n\n  if (cfg.filled) {\n    if (shadow && stroked) {\n      // Prevent drawing shadow on both the text stroke and fill, so\n      // if the text is stroked, remove the shadow for the text fill.\n      ctx.shadowBlur = 0;\n    }\n\n    ctx.fillText(text, x, y, w);\n\n    if (shadow && stroked) {\n      ctx.shadowBlur = shadow;\n    }\n  }\n}\n\nfunction drawText(ctx, lines, rect, model) {\n  var align = model.textAlign;\n  var color = model.color;\n  var filled = !!color;\n  var font = model.font;\n  var ilen = lines.length;\n  var strokeColor = model.textStrokeColor;\n  var strokeWidth = model.textStrokeWidth;\n  var stroked = strokeColor && strokeWidth;\n  var i;\n\n  if (!ilen || !filled && !stroked) {\n    return;\n  } // Adjust coordinates based on text alignment and line height\n\n\n  rect = textGeometry(rect, align, font);\n  ctx.font = font.string;\n  ctx.textAlign = align;\n  ctx.textBaseline = 'middle';\n  ctx.shadowBlur = model.textShadowBlur;\n  ctx.shadowColor = model.textShadowColor;\n\n  if (filled) {\n    ctx.fillStyle = color;\n  }\n\n  if (stroked) {\n    ctx.lineJoin = 'round';\n    ctx.lineWidth = strokeWidth;\n    ctx.strokeStyle = strokeColor;\n  }\n\n  for (i = 0, ilen = lines.length; i < ilen; ++i) {\n    drawTextLine(ctx, lines[i], {\n      stroked: stroked,\n      filled: filled,\n      w: rect.w,\n      x: rect.x,\n      y: rect.y + rect.h * i\n    });\n  }\n}\n\nvar Label = function Label(config, ctx, el, index) {\n  var me = this;\n  me._config = config;\n  me._index = index;\n  me._model = null;\n  me._rects = null;\n  me._ctx = ctx;\n  me._el = el;\n};\n\nmerge(Label.prototype, {\n  /**\r\n   * @private\r\n   */\n  _modelize: function _modelize(display, lines, config, context) {\n    var me = this;\n    var index = me._index;\n    var font = toFont(resolve([config.font, {}], context, index));\n    var color = resolve([config.color, defaults$1.color], context, index);\n    return {\n      align: resolve([config.align, 'center'], context, index),\n      anchor: resolve([config.anchor, 'center'], context, index),\n      area: context.chart.chartArea,\n      backgroundColor: resolve([config.backgroundColor, null], context, index),\n      borderColor: resolve([config.borderColor, null], context, index),\n      borderRadius: resolve([config.borderRadius, 0], context, index),\n      borderWidth: resolve([config.borderWidth, 0], context, index),\n      clamp: resolve([config.clamp, false], context, index),\n      clip: resolve([config.clip, false], context, index),\n      color: color,\n      display: display,\n      font: font,\n      lines: lines,\n      offset: resolve([config.offset, 0], context, index),\n      opacity: resolve([config.opacity, 1], context, index),\n      origin: getScaleOrigin(me._el, context),\n      padding: toPadding(resolve([config.padding, 0], context, index)),\n      positioner: getPositioner(me._el),\n      rotation: resolve([config.rotation, 0], context, index) * (Math.PI / 180),\n      size: utils.textSize(me._ctx, lines, font),\n      textAlign: resolve([config.textAlign, 'start'], context, index),\n      textShadowBlur: resolve([config.textShadowBlur, 0], context, index),\n      textShadowColor: resolve([config.textShadowColor, color], context, index),\n      textStrokeColor: resolve([config.textStrokeColor, color], context, index),\n      textStrokeWidth: resolve([config.textStrokeWidth, 0], context, index)\n    };\n  },\n  update: function update(context) {\n    var me = this;\n    var model = null;\n    var rects = null;\n    var index = me._index;\n    var config = me._config;\n    var value, label, lines; // We first resolve the display option (separately) to avoid computing\n    // other options in case the label is hidden (i.e. display: false).\n\n    var display = resolve([config.display, true], context, index);\n\n    if (display) {\n      value = context.dataset.data[index];\n      label = valueOrDefault(callback(config.formatter, [value, context]), value);\n      lines = isNullOrUndef(label) ? [] : utils.toTextLines(label);\n\n      if (lines.length) {\n        model = me._modelize(display, lines, config, context);\n        rects = boundingRects(model);\n      }\n    }\n\n    me._model = model;\n    me._rects = rects;\n  },\n  geometry: function geometry() {\n    return this._rects ? this._rects.frame : {};\n  },\n  rotation: function rotation() {\n    return this._model ? this._model.rotation : 0;\n  },\n  visible: function visible() {\n    return this._model && this._model.opacity;\n  },\n  model: function model() {\n    return this._model;\n  },\n  draw: function draw(chart, center) {\n    var me = this;\n    var ctx = chart.ctx;\n    var model = me._model;\n    var rects = me._rects;\n    var area;\n\n    if (!this.visible()) {\n      return;\n    }\n\n    ctx.save();\n\n    if (model.clip) {\n      area = model.area;\n      ctx.beginPath();\n      ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n      ctx.clip();\n    }\n\n    ctx.globalAlpha = utils.bound(0, model.opacity, 1);\n    ctx.translate(rasterize(center.x), rasterize(center.y));\n    ctx.rotate(model.rotation);\n    drawFrame(ctx, rects.frame, model);\n    drawText(ctx, model.lines, rects.text, model);\n    ctx.restore();\n  }\n});\nvar MIN_INTEGER = Number.MIN_SAFE_INTEGER || -9007199254740991; // eslint-disable-line es/no-number-minsafeinteger\n\nvar MAX_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991; // eslint-disable-line es/no-number-maxsafeinteger\n\nfunction rotated(point, center, angle) {\n  var cos = Math.cos(angle);\n  var sin = Math.sin(angle);\n  var cx = center.x;\n  var cy = center.y;\n  return {\n    x: cx + cos * (point.x - cx) - sin * (point.y - cy),\n    y: cy + sin * (point.x - cx) + cos * (point.y - cy)\n  };\n}\n\nfunction projected(points, axis) {\n  var min = MAX_INTEGER;\n  var max = MIN_INTEGER;\n  var origin = axis.origin;\n  var i, pt, vx, vy, dp;\n\n  for (i = 0; i < points.length; ++i) {\n    pt = points[i];\n    vx = pt.x - origin.x;\n    vy = pt.y - origin.y;\n    dp = axis.vx * vx + axis.vy * vy;\n    min = Math.min(min, dp);\n    max = Math.max(max, dp);\n  }\n\n  return {\n    min: min,\n    max: max\n  };\n}\n\nfunction toAxis(p0, p1) {\n  var vx = p1.x - p0.x;\n  var vy = p1.y - p0.y;\n  var ln = Math.sqrt(vx * vx + vy * vy);\n  return {\n    vx: (p1.x - p0.x) / ln,\n    vy: (p1.y - p0.y) / ln,\n    origin: p0,\n    ln: ln\n  };\n}\n\nvar HitBox = function HitBox() {\n  this._rotation = 0;\n  this._rect = {\n    x: 0,\n    y: 0,\n    w: 0,\n    h: 0\n  };\n};\n\nmerge(HitBox.prototype, {\n  center: function center() {\n    var r = this._rect;\n    return {\n      x: r.x + r.w / 2,\n      y: r.y + r.h / 2\n    };\n  },\n  update: function update(center, rect, rotation) {\n    this._rotation = rotation;\n    this._rect = {\n      x: rect.x + center.x,\n      y: rect.y + center.y,\n      w: rect.w,\n      h: rect.h\n    };\n  },\n  contains: function contains(point) {\n    var me = this;\n    var margin = 1;\n    var rect = me._rect;\n    point = rotated(point, me.center(), -me._rotation);\n    return !(point.x < rect.x - margin || point.y < rect.y - margin || point.x > rect.x + rect.w + margin * 2 || point.y > rect.y + rect.h + margin * 2);\n  },\n  // Separating Axis Theorem\n  // https://gamedevelopment.tutsplus.com/tutorials/collision-detection-using-the-separating-axis-theorem--gamedev-169\n  intersects: function intersects(other) {\n    var r0 = this._points();\n\n    var r1 = other._points();\n\n    var axes = [toAxis(r0[0], r0[1]), toAxis(r0[0], r0[3])];\n    var i, pr0, pr1;\n\n    if (this._rotation !== other._rotation) {\n      // Only separate with r1 axis if the rotation is different,\n      // else it's enough to separate r0 and r1 with r0 axis only!\n      axes.push(toAxis(r1[0], r1[1]), toAxis(r1[0], r1[3]));\n    }\n\n    for (i = 0; i < axes.length; ++i) {\n      pr0 = projected(r0, axes[i]);\n      pr1 = projected(r1, axes[i]);\n\n      if (pr0.max < pr1.min || pr1.max < pr0.min) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n   * @private\r\n   */\n  _points: function _points() {\n    var me = this;\n    var rect = me._rect;\n    var angle = me._rotation;\n    var center = me.center();\n    return [rotated({\n      x: rect.x,\n      y: rect.y\n    }, center, angle), rotated({\n      x: rect.x + rect.w,\n      y: rect.y\n    }, center, angle), rotated({\n      x: rect.x + rect.w,\n      y: rect.y + rect.h\n    }, center, angle), rotated({\n      x: rect.x,\n      y: rect.y + rect.h\n    }, center, angle)];\n  }\n});\n\nfunction coordinates(el, model, geometry) {\n  var point = model.positioner(el, model);\n  var vx = point.vx;\n  var vy = point.vy;\n\n  if (!vx && !vy) {\n    // if aligned center, we don't want to offset the center point\n    return {\n      x: point.x,\n      y: point.y\n    };\n  }\n\n  var w = geometry.w;\n  var h = geometry.h; // take in account the label rotation\n\n  var rotation = model.rotation;\n  var dx = Math.abs(w / 2 * Math.cos(rotation)) + Math.abs(h / 2 * Math.sin(rotation));\n  var dy = Math.abs(w / 2 * Math.sin(rotation)) + Math.abs(h / 2 * Math.cos(rotation)); // scale the unit vector (vx, vy) to get at least dx or dy equal to\n  // w or h respectively (else we would calculate the distance to the\n  // ellipse inscribed in the bounding rect)\n\n  var vs = 1 / Math.max(Math.abs(vx), Math.abs(vy));\n  dx *= vx * vs;\n  dy *= vy * vs; // finally, include the explicit offset\n\n  dx += model.offset * vx;\n  dy += model.offset * vy;\n  return {\n    x: point.x + dx,\n    y: point.y + dy\n  };\n}\n\nfunction collide(labels, collider) {\n  var i, j, s0, s1; // IMPORTANT Iterate in the reverse order since items at the end of the\n  // list have an higher weight/priority and thus should be less impacted\n  // by the overlapping strategy.\n\n  for (i = labels.length - 1; i >= 0; --i) {\n    s0 = labels[i].$layout;\n\n    for (j = i - 1; j >= 0 && s0._visible; --j) {\n      s1 = labels[j].$layout;\n\n      if (s1._visible && s0._box.intersects(s1._box)) {\n        collider(s0, s1);\n      }\n    }\n  }\n\n  return labels;\n}\n\nfunction compute(labels) {\n  var i, ilen, label, state, geometry, center, proxy; // Initialize labels for overlap detection\n\n  for (i = 0, ilen = labels.length; i < ilen; ++i) {\n    label = labels[i];\n    state = label.$layout;\n\n    if (state._visible) {\n      // Chart.js 3 removed el._model in favor of getProps(), making harder to\n      // abstract reading values in positioners. Also, using string arrays to\n      // read values (i.e. var {a,b,c} = el.getProps([\"a\",\"b\",\"c\"])) would make\n      // positioners inefficient in the normal case (i.e. not the final values)\n      // and the code a bit ugly, so let's use a Proxy instead.\n      proxy = new Proxy(label._el, {\n        get: function get(el, p) {\n          return el.getProps([p], true)[p];\n        }\n      });\n      geometry = label.geometry();\n      center = coordinates(proxy, label.model(), geometry);\n\n      state._box.update(center, geometry, label.rotation());\n    }\n  } // Auto hide overlapping labels\n\n\n  return collide(labels, function (s0, s1) {\n    var h0 = s0._hidable;\n    var h1 = s1._hidable;\n\n    if (h0 && h1 || h1) {\n      s1._visible = false;\n    } else if (h0) {\n      s0._visible = false;\n    }\n  });\n}\n\nvar layout = {\n  prepare: function prepare(datasets) {\n    var labels = [];\n    var i, j, ilen, jlen, label;\n\n    for (i = 0, ilen = datasets.length; i < ilen; ++i) {\n      for (j = 0, jlen = datasets[i].length; j < jlen; ++j) {\n        label = datasets[i][j];\n        labels.push(label);\n        label.$layout = {\n          _box: new HitBox(),\n          _hidable: false,\n          _visible: true,\n          _set: i,\n          _idx: j\n        };\n      }\n    } // TODO New `z` option: labels with a higher z-index are drawn\n    // of top of the ones with a lower index. Lowest z-index labels\n    // are also discarded first when hiding overlapping labels.\n\n\n    labels.sort(function (a, b) {\n      var sa = a.$layout;\n      var sb = b.$layout;\n      return sa._idx === sb._idx ? sb._set - sa._set : sb._idx - sa._idx;\n    });\n    this.update(labels);\n    return labels;\n  },\n  update: function update(labels) {\n    var dirty = false;\n    var i, ilen, label, model, state;\n\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\n      label = labels[i];\n      model = label.model();\n      state = label.$layout;\n      state._hidable = model && model.display === 'auto';\n      state._visible = label.visible();\n      dirty |= state._hidable;\n    }\n\n    if (dirty) {\n      compute(labels);\n    }\n  },\n  lookup: function lookup(labels, point) {\n    var i, state; // IMPORTANT Iterate in the reverse order since items at the end of\n    // the list have an higher z-index, thus should be picked first.\n\n    for (i = labels.length - 1; i >= 0; --i) {\n      state = labels[i].$layout;\n\n      if (state && state._visible && state._box.contains(point)) {\n        return labels[i];\n      }\n    }\n\n    return null;\n  },\n  draw: function draw(chart, labels) {\n    var i, ilen, label, state, geometry, center;\n\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\n      label = labels[i];\n      state = label.$layout;\n\n      if (state._visible) {\n        geometry = label.geometry();\n        center = coordinates(label._el, label.model(), geometry);\n\n        state._box.update(center, geometry, label.rotation());\n\n        label.draw(chart, center);\n      }\n    }\n  }\n};\n\nvar formatter = function formatter(value) {\n  if (isNullOrUndef(value)) {\n    return null;\n  }\n\n  var label = value;\n  var keys, klen, k;\n\n  if (isObject(value)) {\n    if (!isNullOrUndef(value.label)) {\n      label = value.label;\n    } else if (!isNullOrUndef(value.r)) {\n      label = value.r;\n    } else {\n      label = '';\n      keys = Object.keys(value);\n\n      for (k = 0, klen = keys.length; k < klen; ++k) {\n        label += (k !== 0 ? ', ' : '') + keys[k] + ': ' + value[keys[k]];\n      }\n    }\n  }\n\n  return '' + label;\n};\n/**\r\n * IMPORTANT: make sure to also update tests and TypeScript definition\r\n * files (`/test/specs/defaults.spec.js` and `/types/options.d.ts`)\r\n */\n\n\nvar defaults = {\n  align: 'center',\n  anchor: 'center',\n  backgroundColor: null,\n  borderColor: null,\n  borderRadius: 0,\n  borderWidth: 0,\n  clamp: false,\n  clip: false,\n  color: undefined,\n  display: true,\n  font: {\n    family: undefined,\n    lineHeight: 1.2,\n    size: undefined,\n    style: undefined,\n    weight: null\n  },\n  formatter: formatter,\n  labels: undefined,\n  listeners: {},\n  offset: 4,\n  opacity: 1,\n  padding: {\n    top: 4,\n    right: 4,\n    bottom: 4,\n    left: 4\n  },\n  rotation: 0,\n  textAlign: 'start',\n  textStrokeColor: undefined,\n  textStrokeWidth: 0,\n  textShadowBlur: 0,\n  textShadowColor: undefined\n};\n/**\r\n * @see https://github.com/chartjs/Chart.js/issues/4176\r\n */\n\nvar EXPANDO_KEY = '$datalabels';\nvar DEFAULT_KEY = '$default';\n\nfunction configure(dataset, options) {\n  var override = dataset.datalabels;\n  var listeners = {};\n  var configs = [];\n  var labels, keys;\n\n  if (override === false) {\n    return null;\n  }\n\n  if (override === true) {\n    override = {};\n  }\n\n  options = merge({}, [options, override]);\n  labels = options.labels || {};\n  keys = Object.keys(labels);\n  delete options.labels;\n\n  if (keys.length) {\n    keys.forEach(function (key) {\n      if (labels[key]) {\n        configs.push(merge({}, [options, labels[key], {\n          _key: key\n        }]));\n      }\n    });\n  } else {\n    // Default label if no \"named\" label defined.\n    configs.push(options);\n  } // listeners: {<event-type>: {<label-key>: <fn>}}\n\n\n  listeners = configs.reduce(function (target, config) {\n    each(config.listeners || {}, function (fn, event) {\n      target[event] = target[event] || {};\n      target[event][config._key || DEFAULT_KEY] = fn;\n    });\n    delete config.listeners;\n    return target;\n  }, {});\n  return {\n    labels: configs,\n    listeners: listeners\n  };\n}\n\nfunction dispatchEvent(chart, listeners, label) {\n  if (!listeners) {\n    return;\n  }\n\n  var context = label.$context;\n  var groups = label.$groups;\n  var callback$1;\n\n  if (!listeners[groups._set]) {\n    return;\n  }\n\n  callback$1 = listeners[groups._set][groups._key];\n\n  if (!callback$1) {\n    return;\n  }\n\n  if (callback(callback$1, [context]) === true) {\n    // Users are allowed to tweak the given context by injecting values that can be\n    // used in scriptable options to display labels differently based on the current\n    // event (e.g. highlight an hovered label). That's why we update the label with\n    // the output context and schedule a new chart render by setting it dirty.\n    chart[EXPANDO_KEY]._dirty = true;\n    label.update(context);\n  }\n}\n\nfunction dispatchMoveEvents(chart, listeners, previous, label) {\n  var enter, leave;\n\n  if (!previous && !label) {\n    return;\n  }\n\n  if (!previous) {\n    enter = true;\n  } else if (!label) {\n    leave = true;\n  } else if (previous !== label) {\n    leave = enter = true;\n  }\n\n  if (leave) {\n    dispatchEvent(chart, listeners.leave, previous);\n  }\n\n  if (enter) {\n    dispatchEvent(chart, listeners.enter, label);\n  }\n}\n\nfunction handleMoveEvents(chart, event) {\n  var expando = chart[EXPANDO_KEY];\n  var listeners = expando._listeners;\n  var previous, label;\n\n  if (!listeners.enter && !listeners.leave) {\n    return;\n  }\n\n  if (event.type === 'mousemove') {\n    label = layout.lookup(expando._labels, event);\n  } else if (event.type !== 'mouseout') {\n    return;\n  }\n\n  previous = expando._hovered;\n  expando._hovered = label;\n  dispatchMoveEvents(chart, listeners, previous, label);\n}\n\nfunction handleClickEvents(chart, event) {\n  var expando = chart[EXPANDO_KEY];\n  var handlers = expando._listeners.click;\n  var label = handlers && layout.lookup(expando._labels, event);\n\n  if (label) {\n    dispatchEvent(chart, handlers, label);\n  }\n}\n\nvar plugin = {\n  id: 'datalabels',\n  defaults: defaults,\n  beforeInit: function beforeInit(chart) {\n    chart[EXPANDO_KEY] = {\n      _actives: []\n    };\n  },\n  beforeUpdate: function beforeUpdate(chart) {\n    var expando = chart[EXPANDO_KEY];\n    expando._listened = false;\n    expando._listeners = {}; // {<event-type>: {<dataset-index>: {<label-key>: <fn>}}}\n\n    expando._datasets = []; // per dataset labels: [Label[]]\n\n    expando._labels = []; // layouted labels: Label[]\n  },\n  afterDatasetUpdate: function afterDatasetUpdate(chart, args, options) {\n    var datasetIndex = args.index;\n    var expando = chart[EXPANDO_KEY];\n    var labels = expando._datasets[datasetIndex] = [];\n    var visible = chart.isDatasetVisible(datasetIndex);\n    var dataset = chart.data.datasets[datasetIndex];\n    var config = configure(dataset, options);\n    var elements = args.meta.data || [];\n    var ctx = chart.ctx;\n    var i, j, ilen, jlen, cfg, key, el, label;\n    ctx.save();\n\n    for (i = 0, ilen = elements.length; i < ilen; ++i) {\n      el = elements[i];\n      el[EXPANDO_KEY] = [];\n\n      if (visible && el && chart.getDataVisibility(i) && !el.skip) {\n        for (j = 0, jlen = config.labels.length; j < jlen; ++j) {\n          cfg = config.labels[j];\n          key = cfg._key;\n          label = new Label(cfg, ctx, el, i);\n          label.$groups = {\n            _set: datasetIndex,\n            _key: key || DEFAULT_KEY\n          };\n          label.$context = {\n            active: false,\n            chart: chart,\n            dataIndex: i,\n            dataset: dataset,\n            datasetIndex: datasetIndex\n          };\n          label.update(label.$context);\n          el[EXPANDO_KEY].push(label);\n          labels.push(label);\n        }\n      }\n    }\n\n    ctx.restore(); // Store listeners at the chart level and per event type to optimize\n    // cases where no listeners are registered for a specific event.\n\n    merge(expando._listeners, config.listeners, {\n      merger: function merger(event, target, source) {\n        target[event] = target[event] || {};\n        target[event][args.index] = source[event];\n        expando._listened = true;\n      }\n    });\n  },\n  afterUpdate: function afterUpdate(chart, options) {\n    chart[EXPANDO_KEY]._labels = layout.prepare(chart[EXPANDO_KEY]._datasets, options);\n  },\n  // Draw labels on top of all dataset elements\n  // https://github.com/chartjs/chartjs-plugin-datalabels/issues/29\n  // https://github.com/chartjs/chartjs-plugin-datalabels/issues/32\n  afterDatasetsDraw: function afterDatasetsDraw(chart) {\n    layout.draw(chart, chart[EXPANDO_KEY]._labels);\n  },\n  beforeEvent: function beforeEvent(chart, args) {\n    // If there is no listener registered for this chart, `listened` will be false,\n    // meaning we can immediately ignore the incoming event and avoid useless extra\n    // computation for users who don't implement label interactions.\n    if (chart[EXPANDO_KEY]._listened) {\n      var event = args.event;\n\n      switch (event.type) {\n        case 'mousemove':\n        case 'mouseout':\n          handleMoveEvents(chart, event);\n          break;\n\n        case 'click':\n          handleClickEvents(chart, event);\n          break;\n      }\n    }\n  },\n  afterEvent: function afterEvent(chart) {\n    var expando = chart[EXPANDO_KEY];\n    var previous = expando._actives;\n    var actives = expando._actives = chart.getActiveElements();\n    var updates = utils.arrayDiff(previous, actives);\n    var i, ilen, j, jlen, update, label, labels;\n\n    for (i = 0, ilen = updates.length; i < ilen; ++i) {\n      update = updates[i];\n\n      if (update[1]) {\n        labels = update[0].element[EXPANDO_KEY] || [];\n\n        for (j = 0, jlen = labels.length; j < jlen; ++j) {\n          label = labels[j];\n          label.$context.active = update[1] === 1;\n          label.update(label.$context);\n        }\n      }\n    }\n\n    if (expando._dirty || updates.length) {\n      layout.update(expando._labels);\n      chart.render();\n    }\n\n    delete expando._dirty;\n  }\n};\nexport default plugin;","map":{"version":3,"sources":["C:/Users/Sam/Desktop/snax-boe-texas/node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.esm.js"],"names":["isNullOrUndef","merge","toFont","resolve","toPadding","valueOrDefault","callback","isObject","each","defaults","defaults$1","ArcElement","PointElement","BarElement","devicePixelRatio","window","screen","deviceXDPI","logicalXDPI","utils","toTextLines","inputs","lines","input","concat","length","pop","unshift","apply","split","Array","isArray","push","textSize","ctx","font","items","ilen","prev","width","i","string","Math","max","measureText","height","lineHeight","bound","min","value","arrayDiff","a0","a1","slice","updates","j","v","indexOf","splice","rasterize","round","orient","point","origin","x0","x","y0","y","dx","dy","ln","sqrt","aligned","vx","vy","align","PI","cos","sin","R_INSIDE","R_LEFT","R_RIGHT","R_BOTTOM","R_TOP","region","rect","res","left","right","top","bottom","clipped","segment","area","x1","y1","r0","r1","r","compute$1","range","config","anchor","clamp","positioners","arc","el","angle","startAngle","endAngle","innerRadius","outerRadius","rx","options","radius","ry","bar","sx","sy","horizontal","base","abs","fallback","boundingRects","model","borderWidth","padding","th","size","tw","tx","ty","frame","w","h","text","getScaleOrigin","context","scale","chart","getDatasetMeta","datasetIndex","vScale","xCenter","undefined","yCenter","pixel","getBasePixel","getPositioner","drawRoundedRect","HALF_PI","moveTo","closePath","drawFrame","bgColor","backgroundColor","borderColor","beginPath","borderRadius","fillStyle","fill","strokeStyle","lineWidth","lineJoin","stroke","textGeometry","drawTextLine","cfg","shadow","shadowBlur","stroked","strokeText","filled","fillText","drawText","textAlign","color","strokeColor","textStrokeColor","strokeWidth","textStrokeWidth","textBaseline","textShadowBlur","shadowColor","textShadowColor","Label","index","me","_config","_index","_model","_rects","_ctx","_el","prototype","_modelize","display","chartArea","clip","offset","opacity","positioner","rotation","update","rects","label","dataset","data","formatter","geometry","visible","draw","center","save","globalAlpha","translate","rotate","restore","MIN_INTEGER","Number","MIN_SAFE_INTEGER","MAX_INTEGER","MAX_SAFE_INTEGER","rotated","cx","cy","projected","points","axis","pt","dp","toAxis","p0","p1","HitBox","_rotation","_rect","contains","margin","intersects","other","_points","axes","pr0","pr1","coordinates","vs","collide","labels","collider","s0","s1","$layout","_visible","_box","compute","state","proxy","Proxy","get","p","getProps","h0","_hidable","h1","layout","prepare","datasets","jlen","_set","_idx","sort","a","b","sa","sb","dirty","lookup","keys","klen","k","Object","family","style","weight","listeners","EXPANDO_KEY","DEFAULT_KEY","configure","override","datalabels","configs","forEach","key","_key","reduce","target","fn","event","dispatchEvent","$context","groups","$groups","callback$1","_dirty","dispatchMoveEvents","previous","enter","leave","handleMoveEvents","expando","_listeners","type","_labels","_hovered","handleClickEvents","handlers","click","plugin","id","beforeInit","_actives","beforeUpdate","_listened","_datasets","afterDatasetUpdate","args","isDatasetVisible","elements","meta","getDataVisibility","skip","active","dataIndex","merger","source","afterUpdate","afterDatasetsDraw","beforeEvent","afterEvent","actives","getActiveElements","element","render"],"mappings":"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","sourcesContent":["/*!\r\n * chartjs-plugin-datalabels v2.0.0\r\n * https://chartjs-plugin-datalabels.netlify.app\r\n * (c) 2017-2021 chartjs-plugin-datalabels contributors\r\n * Released under the MIT license\r\n */\r\nimport { isNullOrUndef, merge, toFont, resolve, toPadding, valueOrDefault, callback, isObject, each } from 'chart.js/helpers';\r\nimport { defaults as defaults$1, ArcElement, PointElement, BarElement } from 'chart.js';\r\n\r\nvar devicePixelRatio = (function() {\r\n  if (typeof window !== 'undefined') {\r\n    if (window.devicePixelRatio) {\r\n      return window.devicePixelRatio;\r\n    }\r\n\r\n    // devicePixelRatio is undefined on IE10\r\n    // https://stackoverflow.com/a/20204180/8837887\r\n    // https://github.com/chartjs/chartjs-plugin-datalabels/issues/85\r\n    var screen = window.screen;\r\n    if (screen) {\r\n      return (screen.deviceXDPI || 1) / (screen.logicalXDPI || 1);\r\n    }\r\n  }\r\n\r\n  return 1;\r\n}());\r\n\r\nvar utils = {\r\n  // @todo move this in Chart.helpers.toTextLines\r\n  toTextLines: function(inputs) {\r\n    var lines = [];\r\n    var input;\r\n\r\n    inputs = [].concat(inputs);\r\n    while (inputs.length) {\r\n      input = inputs.pop();\r\n      if (typeof input === 'string') {\r\n        lines.unshift.apply(lines, input.split('\\n'));\r\n      } else if (Array.isArray(input)) {\r\n        inputs.push.apply(inputs, input);\r\n      } else if (!isNullOrUndef(inputs)) {\r\n        lines.unshift('' + input);\r\n      }\r\n    }\r\n\r\n    return lines;\r\n  },\r\n\r\n  // @todo move this in Chart.helpers.canvas.textSize\r\n  // @todo cache calls of measureText if font doesn't change?!\r\n  textSize: function(ctx, lines, font) {\r\n    var items = [].concat(lines);\r\n    var ilen = items.length;\r\n    var prev = ctx.font;\r\n    var width = 0;\r\n    var i;\r\n\r\n    ctx.font = font.string;\r\n\r\n    for (i = 0; i < ilen; ++i) {\r\n      width = Math.max(ctx.measureText(items[i]).width, width);\r\n    }\r\n\r\n    ctx.font = prev;\r\n\r\n    return {\r\n      height: ilen * font.lineHeight,\r\n      width: width\r\n    };\r\n  },\r\n\r\n  /**\r\n   * Returns value bounded by min and max. This is equivalent to max(min, min(value, max)).\r\n   * @todo move this method in Chart.helpers.bound\r\n   * https://doc.qt.io/qt-5/qtglobal.html#qBound\r\n   */\r\n  bound: function(min, value, max) {\r\n    return Math.max(min, Math.min(value, max));\r\n  },\r\n\r\n  /**\r\n   * Returns an array of pair [value, state] where state is:\r\n   * * -1: value is only in a0 (removed)\r\n   * *  1: value is only in a1 (added)\r\n   */\r\n  arrayDiff: function(a0, a1) {\r\n    var prev = a0.slice();\r\n    var updates = [];\r\n    var i, j, ilen, v;\r\n\r\n    for (i = 0, ilen = a1.length; i < ilen; ++i) {\r\n      v = a1[i];\r\n      j = prev.indexOf(v);\r\n\r\n      if (j === -1) {\r\n        updates.push([v, 1]);\r\n      } else {\r\n        prev.splice(j, 1);\r\n      }\r\n    }\r\n\r\n    for (i = 0, ilen = prev.length; i < ilen; ++i) {\r\n      updates.push([prev[i], -1]);\r\n    }\r\n\r\n    return updates;\r\n  },\r\n\r\n  /**\r\n   * https://github.com/chartjs/chartjs-plugin-datalabels/issues/70\r\n   */\r\n  rasterize: function(v) {\r\n    return Math.round(v * devicePixelRatio) / devicePixelRatio;\r\n  }\r\n};\r\n\r\nfunction orient(point, origin) {\r\n  var x0 = origin.x;\r\n  var y0 = origin.y;\r\n\r\n  if (x0 === null) {\r\n    return {x: 0, y: -1};\r\n  }\r\n  if (y0 === null) {\r\n    return {x: 1, y: 0};\r\n  }\r\n\r\n  var dx = point.x - x0;\r\n  var dy = point.y - y0;\r\n  var ln = Math.sqrt(dx * dx + dy * dy);\r\n\r\n  return {\r\n    x: ln ? dx / ln : 0,\r\n    y: ln ? dy / ln : -1\r\n  };\r\n}\r\n\r\nfunction aligned(x, y, vx, vy, align) {\r\n  switch (align) {\r\n  case 'center':\r\n    vx = vy = 0;\r\n    break;\r\n  case 'bottom':\r\n    vx = 0;\r\n    vy = 1;\r\n    break;\r\n  case 'right':\r\n    vx = 1;\r\n    vy = 0;\r\n    break;\r\n  case 'left':\r\n    vx = -1;\r\n    vy = 0;\r\n    break;\r\n  case 'top':\r\n    vx = 0;\r\n    vy = -1;\r\n    break;\r\n  case 'start':\r\n    vx = -vx;\r\n    vy = -vy;\r\n    break;\r\n  case 'end':\r\n    // keep natural orientation\r\n    break;\r\n  default:\r\n    // clockwise rotation (in degree)\r\n    align *= (Math.PI / 180);\r\n    vx = Math.cos(align);\r\n    vy = Math.sin(align);\r\n    break;\r\n  }\r\n\r\n  return {\r\n    x: x,\r\n    y: y,\r\n    vx: vx,\r\n    vy: vy\r\n  };\r\n}\r\n\r\n// Line clipping (Cohen–Sutherland algorithm)\r\n// https://en.wikipedia.org/wiki/Cohen–Sutherland_algorithm\r\n\r\nvar R_INSIDE = 0;\r\nvar R_LEFT = 1;\r\nvar R_RIGHT = 2;\r\nvar R_BOTTOM = 4;\r\nvar R_TOP = 8;\r\n\r\nfunction region(x, y, rect) {\r\n  var res = R_INSIDE;\r\n\r\n  if (x < rect.left) {\r\n    res |= R_LEFT;\r\n  } else if (x > rect.right) {\r\n    res |= R_RIGHT;\r\n  }\r\n  if (y < rect.top) {\r\n    res |= R_TOP;\r\n  } else if (y > rect.bottom) {\r\n    res |= R_BOTTOM;\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nfunction clipped(segment, area) {\r\n  var x0 = segment.x0;\r\n  var y0 = segment.y0;\r\n  var x1 = segment.x1;\r\n  var y1 = segment.y1;\r\n  var r0 = region(x0, y0, area);\r\n  var r1 = region(x1, y1, area);\r\n  var r, x, y;\r\n\r\n  // eslint-disable-next-line no-constant-condition\r\n  while (true) {\r\n    if (!(r0 | r1) || (r0 & r1)) {\r\n      // both points inside or on the same side: no clipping\r\n      break;\r\n    }\r\n\r\n    // at least one point is outside\r\n    r = r0 || r1;\r\n\r\n    if (r & R_TOP) {\r\n      x = x0 + (x1 - x0) * (area.top - y0) / (y1 - y0);\r\n      y = area.top;\r\n    } else if (r & R_BOTTOM) {\r\n      x = x0 + (x1 - x0) * (area.bottom - y0) / (y1 - y0);\r\n      y = area.bottom;\r\n    } else if (r & R_RIGHT) {\r\n      y = y0 + (y1 - y0) * (area.right - x0) / (x1 - x0);\r\n      x = area.right;\r\n    } else if (r & R_LEFT) {\r\n      y = y0 + (y1 - y0) * (area.left - x0) / (x1 - x0);\r\n      x = area.left;\r\n    }\r\n\r\n    if (r === r0) {\r\n      x0 = x;\r\n      y0 = y;\r\n      r0 = region(x0, y0, area);\r\n    } else {\r\n      x1 = x;\r\n      y1 = y;\r\n      r1 = region(x1, y1, area);\r\n    }\r\n  }\r\n\r\n  return {\r\n    x0: x0,\r\n    x1: x1,\r\n    y0: y0,\r\n    y1: y1\r\n  };\r\n}\r\n\r\nfunction compute$1(range, config) {\r\n  var anchor = config.anchor;\r\n  var segment = range;\r\n  var x, y;\r\n\r\n  if (config.clamp) {\r\n    segment = clipped(segment, config.area);\r\n  }\r\n\r\n  if (anchor === 'start') {\r\n    x = segment.x0;\r\n    y = segment.y0;\r\n  } else if (anchor === 'end') {\r\n    x = segment.x1;\r\n    y = segment.y1;\r\n  } else {\r\n    x = (segment.x0 + segment.x1) / 2;\r\n    y = (segment.y0 + segment.y1) / 2;\r\n  }\r\n\r\n  return aligned(x, y, range.vx, range.vy, config.align);\r\n}\r\n\r\nvar positioners = {\r\n  arc: function(el, config) {\r\n    var angle = (el.startAngle + el.endAngle) / 2;\r\n    var vx = Math.cos(angle);\r\n    var vy = Math.sin(angle);\r\n    var r0 = el.innerRadius;\r\n    var r1 = el.outerRadius;\r\n\r\n    return compute$1({\r\n      x0: el.x + vx * r0,\r\n      y0: el.y + vy * r0,\r\n      x1: el.x + vx * r1,\r\n      y1: el.y + vy * r1,\r\n      vx: vx,\r\n      vy: vy\r\n    }, config);\r\n  },\r\n\r\n  point: function(el, config) {\r\n    var v = orient(el, config.origin);\r\n    var rx = v.x * el.options.radius;\r\n    var ry = v.y * el.options.radius;\r\n\r\n    return compute$1({\r\n      x0: el.x - rx,\r\n      y0: el.y - ry,\r\n      x1: el.x + rx,\r\n      y1: el.y + ry,\r\n      vx: v.x,\r\n      vy: v.y\r\n    }, config);\r\n  },\r\n\r\n  bar: function(el, config) {\r\n    var v = orient(el, config.origin);\r\n    var x = el.x;\r\n    var y = el.y;\r\n    var sx = 0;\r\n    var sy = 0;\r\n\r\n    if (el.horizontal) {\r\n      x = Math.min(el.x, el.base);\r\n      sx = Math.abs(el.base - el.x);\r\n    } else {\r\n      y = Math.min(el.y, el.base);\r\n      sy = Math.abs(el.base - el.y);\r\n    }\r\n\r\n    return compute$1({\r\n      x0: x,\r\n      y0: y + sy,\r\n      x1: x + sx,\r\n      y1: y,\r\n      vx: v.x,\r\n      vy: v.y\r\n    }, config);\r\n  },\r\n\r\n  fallback: function(el, config) {\r\n    var v = orient(el, config.origin);\r\n\r\n    return compute$1({\r\n      x0: el.x,\r\n      y0: el.y,\r\n      x1: el.x,\r\n      y1: el.y,\r\n      vx: v.x,\r\n      vy: v.y\r\n    }, config);\r\n  }\r\n};\r\n\r\nvar rasterize = utils.rasterize;\r\n\r\nfunction boundingRects(model) {\r\n  var borderWidth = model.borderWidth || 0;\r\n  var padding = model.padding;\r\n  var th = model.size.height;\r\n  var tw = model.size.width;\r\n  var tx = -tw / 2;\r\n  var ty = -th / 2;\r\n\r\n  return {\r\n    frame: {\r\n      x: tx - padding.left - borderWidth,\r\n      y: ty - padding.top - borderWidth,\r\n      w: tw + padding.width + borderWidth * 2,\r\n      h: th + padding.height + borderWidth * 2\r\n    },\r\n    text: {\r\n      x: tx,\r\n      y: ty,\r\n      w: tw,\r\n      h: th\r\n    }\r\n  };\r\n}\r\n\r\nfunction getScaleOrigin(el, context) {\r\n  var scale = context.chart.getDatasetMeta(context.datasetIndex).vScale;\r\n\r\n  if (!scale) {\r\n    return null;\r\n  }\r\n\r\n  if (scale.xCenter !== undefined && scale.yCenter !== undefined) {\r\n    return {x: scale.xCenter, y: scale.yCenter};\r\n  }\r\n\r\n  var pixel = scale.getBasePixel();\r\n  return el.horizontal ?\r\n    {x: pixel, y: null} :\r\n    {x: null, y: pixel};\r\n}\r\n\r\nfunction getPositioner(el) {\r\n  if (el instanceof ArcElement) {\r\n    return positioners.arc;\r\n  }\r\n  if (el instanceof PointElement) {\r\n    return positioners.point;\r\n  }\r\n  if (el instanceof BarElement) {\r\n    return positioners.bar;\r\n  }\r\n  return positioners.fallback;\r\n}\r\n\r\nfunction drawRoundedRect(ctx, x, y, w, h, radius) {\r\n  var HALF_PI = Math.PI / 2;\r\n\r\n  if (radius) {\r\n    var r = Math.min(radius, h / 2, w / 2);\r\n    var left = x + r;\r\n    var top = y + r;\r\n    var right = x + w - r;\r\n    var bottom = y + h - r;\r\n\r\n    ctx.moveTo(x, top);\r\n    if (left < right && top < bottom) {\r\n      ctx.arc(left, top, r, -Math.PI, -HALF_PI);\r\n      ctx.arc(right, top, r, -HALF_PI, 0);\r\n      ctx.arc(right, bottom, r, 0, HALF_PI);\r\n      ctx.arc(left, bottom, r, HALF_PI, Math.PI);\r\n    } else if (left < right) {\r\n      ctx.moveTo(left, y);\r\n      ctx.arc(right, top, r, -HALF_PI, HALF_PI);\r\n      ctx.arc(left, top, r, HALF_PI, Math.PI + HALF_PI);\r\n    } else if (top < bottom) {\r\n      ctx.arc(left, top, r, -Math.PI, 0);\r\n      ctx.arc(left, bottom, r, 0, Math.PI);\r\n    } else {\r\n      ctx.arc(left, top, r, -Math.PI, Math.PI);\r\n    }\r\n    ctx.closePath();\r\n    ctx.moveTo(x, y);\r\n  } else {\r\n    ctx.rect(x, y, w, h);\r\n  }\r\n}\r\n\r\nfunction drawFrame(ctx, rect, model) {\r\n  var bgColor = model.backgroundColor;\r\n  var borderColor = model.borderColor;\r\n  var borderWidth = model.borderWidth;\r\n\r\n  if (!bgColor && (!borderColor || !borderWidth)) {\r\n    return;\r\n  }\r\n\r\n  ctx.beginPath();\r\n\r\n  drawRoundedRect(\r\n    ctx,\r\n    rasterize(rect.x) + borderWidth / 2,\r\n    rasterize(rect.y) + borderWidth / 2,\r\n    rasterize(rect.w) - borderWidth,\r\n    rasterize(rect.h) - borderWidth,\r\n    model.borderRadius);\r\n\r\n  ctx.closePath();\r\n\r\n  if (bgColor) {\r\n    ctx.fillStyle = bgColor;\r\n    ctx.fill();\r\n  }\r\n\r\n  if (borderColor && borderWidth) {\r\n    ctx.strokeStyle = borderColor;\r\n    ctx.lineWidth = borderWidth;\r\n    ctx.lineJoin = 'miter';\r\n    ctx.stroke();\r\n  }\r\n}\r\n\r\nfunction textGeometry(rect, align, font) {\r\n  var h = font.lineHeight;\r\n  var w = rect.w;\r\n  var x = rect.x;\r\n  var y = rect.y + h / 2;\r\n\r\n  if (align === 'center') {\r\n    x += w / 2;\r\n  } else if (align === 'end' || align === 'right') {\r\n    x += w;\r\n  }\r\n\r\n  return {\r\n    h: h,\r\n    w: w,\r\n    x: x,\r\n    y: y\r\n  };\r\n}\r\n\r\nfunction drawTextLine(ctx, text, cfg) {\r\n  var shadow = ctx.shadowBlur;\r\n  var stroked = cfg.stroked;\r\n  var x = rasterize(cfg.x);\r\n  var y = rasterize(cfg.y);\r\n  var w = rasterize(cfg.w);\r\n\r\n  if (stroked) {\r\n    ctx.strokeText(text, x, y, w);\r\n  }\r\n\r\n  if (cfg.filled) {\r\n    if (shadow && stroked) {\r\n      // Prevent drawing shadow on both the text stroke and fill, so\r\n      // if the text is stroked, remove the shadow for the text fill.\r\n      ctx.shadowBlur = 0;\r\n    }\r\n\r\n    ctx.fillText(text, x, y, w);\r\n\r\n    if (shadow && stroked) {\r\n      ctx.shadowBlur = shadow;\r\n    }\r\n  }\r\n}\r\n\r\nfunction drawText(ctx, lines, rect, model) {\r\n  var align = model.textAlign;\r\n  var color = model.color;\r\n  var filled = !!color;\r\n  var font = model.font;\r\n  var ilen = lines.length;\r\n  var strokeColor = model.textStrokeColor;\r\n  var strokeWidth = model.textStrokeWidth;\r\n  var stroked = strokeColor && strokeWidth;\r\n  var i;\r\n\r\n  if (!ilen || (!filled && !stroked)) {\r\n    return;\r\n  }\r\n\r\n  // Adjust coordinates based on text alignment and line height\r\n  rect = textGeometry(rect, align, font);\r\n\r\n  ctx.font = font.string;\r\n  ctx.textAlign = align;\r\n  ctx.textBaseline = 'middle';\r\n  ctx.shadowBlur = model.textShadowBlur;\r\n  ctx.shadowColor = model.textShadowColor;\r\n\r\n  if (filled) {\r\n    ctx.fillStyle = color;\r\n  }\r\n  if (stroked) {\r\n    ctx.lineJoin = 'round';\r\n    ctx.lineWidth = strokeWidth;\r\n    ctx.strokeStyle = strokeColor;\r\n  }\r\n\r\n  for (i = 0, ilen = lines.length; i < ilen; ++i) {\r\n    drawTextLine(ctx, lines[i], {\r\n      stroked: stroked,\r\n      filled: filled,\r\n      w: rect.w,\r\n      x: rect.x,\r\n      y: rect.y + rect.h * i\r\n    });\r\n  }\r\n}\r\n\r\nvar Label = function(config, ctx, el, index) {\r\n  var me = this;\r\n\r\n  me._config = config;\r\n  me._index = index;\r\n  me._model = null;\r\n  me._rects = null;\r\n  me._ctx = ctx;\r\n  me._el = el;\r\n};\r\n\r\nmerge(Label.prototype, {\r\n  /**\r\n   * @private\r\n   */\r\n  _modelize: function(display, lines, config, context) {\r\n    var me = this;\r\n    var index = me._index;\r\n    var font = toFont(resolve([config.font, {}], context, index));\r\n    var color = resolve([config.color, defaults$1.color], context, index);\r\n\r\n    return {\r\n      align: resolve([config.align, 'center'], context, index),\r\n      anchor: resolve([config.anchor, 'center'], context, index),\r\n      area: context.chart.chartArea,\r\n      backgroundColor: resolve([config.backgroundColor, null], context, index),\r\n      borderColor: resolve([config.borderColor, null], context, index),\r\n      borderRadius: resolve([config.borderRadius, 0], context, index),\r\n      borderWidth: resolve([config.borderWidth, 0], context, index),\r\n      clamp: resolve([config.clamp, false], context, index),\r\n      clip: resolve([config.clip, false], context, index),\r\n      color: color,\r\n      display: display,\r\n      font: font,\r\n      lines: lines,\r\n      offset: resolve([config.offset, 0], context, index),\r\n      opacity: resolve([config.opacity, 1], context, index),\r\n      origin: getScaleOrigin(me._el, context),\r\n      padding: toPadding(resolve([config.padding, 0], context, index)),\r\n      positioner: getPositioner(me._el),\r\n      rotation: resolve([config.rotation, 0], context, index) * (Math.PI / 180),\r\n      size: utils.textSize(me._ctx, lines, font),\r\n      textAlign: resolve([config.textAlign, 'start'], context, index),\r\n      textShadowBlur: resolve([config.textShadowBlur, 0], context, index),\r\n      textShadowColor: resolve([config.textShadowColor, color], context, index),\r\n      textStrokeColor: resolve([config.textStrokeColor, color], context, index),\r\n      textStrokeWidth: resolve([config.textStrokeWidth, 0], context, index)\r\n    };\r\n  },\r\n\r\n  update: function(context) {\r\n    var me = this;\r\n    var model = null;\r\n    var rects = null;\r\n    var index = me._index;\r\n    var config = me._config;\r\n    var value, label, lines;\r\n\r\n    // We first resolve the display option (separately) to avoid computing\r\n    // other options in case the label is hidden (i.e. display: false).\r\n    var display = resolve([config.display, true], context, index);\r\n\r\n    if (display) {\r\n      value = context.dataset.data[index];\r\n      label = valueOrDefault(callback(config.formatter, [value, context]), value);\r\n      lines = isNullOrUndef(label) ? [] : utils.toTextLines(label);\r\n\r\n      if (lines.length) {\r\n        model = me._modelize(display, lines, config, context);\r\n        rects = boundingRects(model);\r\n      }\r\n    }\r\n\r\n    me._model = model;\r\n    me._rects = rects;\r\n  },\r\n\r\n  geometry: function() {\r\n    return this._rects ? this._rects.frame : {};\r\n  },\r\n\r\n  rotation: function() {\r\n    return this._model ? this._model.rotation : 0;\r\n  },\r\n\r\n  visible: function() {\r\n    return this._model && this._model.opacity;\r\n  },\r\n\r\n  model: function() {\r\n    return this._model;\r\n  },\r\n\r\n  draw: function(chart, center) {\r\n    var me = this;\r\n    var ctx = chart.ctx;\r\n    var model = me._model;\r\n    var rects = me._rects;\r\n    var area;\r\n\r\n    if (!this.visible()) {\r\n      return;\r\n    }\r\n\r\n    ctx.save();\r\n\r\n    if (model.clip) {\r\n      area = model.area;\r\n      ctx.beginPath();\r\n      ctx.rect(\r\n        area.left,\r\n        area.top,\r\n        area.right - area.left,\r\n        area.bottom - area.top);\r\n      ctx.clip();\r\n    }\r\n\r\n    ctx.globalAlpha = utils.bound(0, model.opacity, 1);\r\n    ctx.translate(rasterize(center.x), rasterize(center.y));\r\n    ctx.rotate(model.rotation);\r\n\r\n    drawFrame(ctx, rects.frame, model);\r\n    drawText(ctx, model.lines, rects.text, model);\r\n\r\n    ctx.restore();\r\n  }\r\n});\r\n\r\nvar MIN_INTEGER = Number.MIN_SAFE_INTEGER || -9007199254740991; // eslint-disable-line es/no-number-minsafeinteger\r\nvar MAX_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;  // eslint-disable-line es/no-number-maxsafeinteger\r\n\r\nfunction rotated(point, center, angle) {\r\n  var cos = Math.cos(angle);\r\n  var sin = Math.sin(angle);\r\n  var cx = center.x;\r\n  var cy = center.y;\r\n\r\n  return {\r\n    x: cx + cos * (point.x - cx) - sin * (point.y - cy),\r\n    y: cy + sin * (point.x - cx) + cos * (point.y - cy)\r\n  };\r\n}\r\n\r\nfunction projected(points, axis) {\r\n  var min = MAX_INTEGER;\r\n  var max = MIN_INTEGER;\r\n  var origin = axis.origin;\r\n  var i, pt, vx, vy, dp;\r\n\r\n  for (i = 0; i < points.length; ++i) {\r\n    pt = points[i];\r\n    vx = pt.x - origin.x;\r\n    vy = pt.y - origin.y;\r\n    dp = axis.vx * vx + axis.vy * vy;\r\n    min = Math.min(min, dp);\r\n    max = Math.max(max, dp);\r\n  }\r\n\r\n  return {\r\n    min: min,\r\n    max: max\r\n  };\r\n}\r\n\r\nfunction toAxis(p0, p1) {\r\n  var vx = p1.x - p0.x;\r\n  var vy = p1.y - p0.y;\r\n  var ln = Math.sqrt(vx * vx + vy * vy);\r\n\r\n  return {\r\n    vx: (p1.x - p0.x) / ln,\r\n    vy: (p1.y - p0.y) / ln,\r\n    origin: p0,\r\n    ln: ln\r\n  };\r\n}\r\n\r\nvar HitBox = function() {\r\n  this._rotation = 0;\r\n  this._rect = {\r\n    x: 0,\r\n    y: 0,\r\n    w: 0,\r\n    h: 0\r\n  };\r\n};\r\n\r\nmerge(HitBox.prototype, {\r\n  center: function() {\r\n    var r = this._rect;\r\n    return {\r\n      x: r.x + r.w / 2,\r\n      y: r.y + r.h / 2\r\n    };\r\n  },\r\n\r\n  update: function(center, rect, rotation) {\r\n    this._rotation = rotation;\r\n    this._rect = {\r\n      x: rect.x + center.x,\r\n      y: rect.y + center.y,\r\n      w: rect.w,\r\n      h: rect.h\r\n    };\r\n  },\r\n\r\n  contains: function(point) {\r\n    var me = this;\r\n    var margin = 1;\r\n    var rect = me._rect;\r\n\r\n    point = rotated(point, me.center(), -me._rotation);\r\n\r\n    return !(point.x < rect.x - margin\r\n      || point.y < rect.y - margin\r\n      || point.x > rect.x + rect.w + margin * 2\r\n      || point.y > rect.y + rect.h + margin * 2);\r\n  },\r\n\r\n  // Separating Axis Theorem\r\n  // https://gamedevelopment.tutsplus.com/tutorials/collision-detection-using-the-separating-axis-theorem--gamedev-169\r\n  intersects: function(other) {\r\n    var r0 = this._points();\r\n    var r1 = other._points();\r\n    var axes = [\r\n      toAxis(r0[0], r0[1]),\r\n      toAxis(r0[0], r0[3])\r\n    ];\r\n    var i, pr0, pr1;\r\n\r\n    if (this._rotation !== other._rotation) {\r\n      // Only separate with r1 axis if the rotation is different,\r\n      // else it's enough to separate r0 and r1 with r0 axis only!\r\n      axes.push(\r\n        toAxis(r1[0], r1[1]),\r\n        toAxis(r1[0], r1[3])\r\n      );\r\n    }\r\n\r\n    for (i = 0; i < axes.length; ++i) {\r\n      pr0 = projected(r0, axes[i]);\r\n      pr1 = projected(r1, axes[i]);\r\n\r\n      if (pr0.max < pr1.min || pr1.max < pr0.min) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  },\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  _points: function() {\r\n    var me = this;\r\n    var rect = me._rect;\r\n    var angle = me._rotation;\r\n    var center = me.center();\r\n\r\n    return [\r\n      rotated({x: rect.x, y: rect.y}, center, angle),\r\n      rotated({x: rect.x + rect.w, y: rect.y}, center, angle),\r\n      rotated({x: rect.x + rect.w, y: rect.y + rect.h}, center, angle),\r\n      rotated({x: rect.x, y: rect.y + rect.h}, center, angle)\r\n    ];\r\n  }\r\n});\r\n\r\nfunction coordinates(el, model, geometry) {\r\n  var point = model.positioner(el, model);\r\n  var vx = point.vx;\r\n  var vy = point.vy;\r\n\r\n  if (!vx && !vy) {\r\n    // if aligned center, we don't want to offset the center point\r\n    return {x: point.x, y: point.y};\r\n  }\r\n\r\n  var w = geometry.w;\r\n  var h = geometry.h;\r\n\r\n  // take in account the label rotation\r\n  var rotation = model.rotation;\r\n  var dx = Math.abs(w / 2 * Math.cos(rotation)) + Math.abs(h / 2 * Math.sin(rotation));\r\n  var dy = Math.abs(w / 2 * Math.sin(rotation)) + Math.abs(h / 2 * Math.cos(rotation));\r\n\r\n  // scale the unit vector (vx, vy) to get at least dx or dy equal to\r\n  // w or h respectively (else we would calculate the distance to the\r\n  // ellipse inscribed in the bounding rect)\r\n  var vs = 1 / Math.max(Math.abs(vx), Math.abs(vy));\r\n  dx *= vx * vs;\r\n  dy *= vy * vs;\r\n\r\n  // finally, include the explicit offset\r\n  dx += model.offset * vx;\r\n  dy += model.offset * vy;\r\n\r\n  return {\r\n    x: point.x + dx,\r\n    y: point.y + dy\r\n  };\r\n}\r\n\r\nfunction collide(labels, collider) {\r\n  var i, j, s0, s1;\r\n\r\n  // IMPORTANT Iterate in the reverse order since items at the end of the\r\n  // list have an higher weight/priority and thus should be less impacted\r\n  // by the overlapping strategy.\r\n\r\n  for (i = labels.length - 1; i >= 0; --i) {\r\n    s0 = labels[i].$layout;\r\n\r\n    for (j = i - 1; j >= 0 && s0._visible; --j) {\r\n      s1 = labels[j].$layout;\r\n\r\n      if (s1._visible && s0._box.intersects(s1._box)) {\r\n        collider(s0, s1);\r\n      }\r\n    }\r\n  }\r\n\r\n  return labels;\r\n}\r\n\r\nfunction compute(labels) {\r\n  var i, ilen, label, state, geometry, center, proxy;\r\n\r\n  // Initialize labels for overlap detection\r\n  for (i = 0, ilen = labels.length; i < ilen; ++i) {\r\n    label = labels[i];\r\n    state = label.$layout;\r\n\r\n    if (state._visible) {\r\n      // Chart.js 3 removed el._model in favor of getProps(), making harder to\r\n      // abstract reading values in positioners. Also, using string arrays to\r\n      // read values (i.e. var {a,b,c} = el.getProps([\"a\",\"b\",\"c\"])) would make\r\n      // positioners inefficient in the normal case (i.e. not the final values)\r\n      // and the code a bit ugly, so let's use a Proxy instead.\r\n      proxy = new Proxy(label._el, {get: (el, p) => el.getProps([p], true)[p]});\r\n\r\n      geometry = label.geometry();\r\n      center = coordinates(proxy, label.model(), geometry);\r\n      state._box.update(center, geometry, label.rotation());\r\n    }\r\n  }\r\n\r\n  // Auto hide overlapping labels\r\n  return collide(labels, function(s0, s1) {\r\n    var h0 = s0._hidable;\r\n    var h1 = s1._hidable;\r\n\r\n    if ((h0 && h1) || h1) {\r\n      s1._visible = false;\r\n    } else if (h0) {\r\n      s0._visible = false;\r\n    }\r\n  });\r\n}\r\n\r\nvar layout = {\r\n  prepare: function(datasets) {\r\n    var labels = [];\r\n    var i, j, ilen, jlen, label;\r\n\r\n    for (i = 0, ilen = datasets.length; i < ilen; ++i) {\r\n      for (j = 0, jlen = datasets[i].length; j < jlen; ++j) {\r\n        label = datasets[i][j];\r\n        labels.push(label);\r\n        label.$layout = {\r\n          _box: new HitBox(),\r\n          _hidable: false,\r\n          _visible: true,\r\n          _set: i,\r\n          _idx: j\r\n        };\r\n      }\r\n    }\r\n\r\n    // TODO New `z` option: labels with a higher z-index are drawn\r\n    // of top of the ones with a lower index. Lowest z-index labels\r\n    // are also discarded first when hiding overlapping labels.\r\n    labels.sort(function(a, b) {\r\n      var sa = a.$layout;\r\n      var sb = b.$layout;\r\n\r\n      return sa._idx === sb._idx\r\n        ? sb._set - sa._set\r\n        : sb._idx - sa._idx;\r\n    });\r\n\r\n    this.update(labels);\r\n\r\n    return labels;\r\n  },\r\n\r\n  update: function(labels) {\r\n    var dirty = false;\r\n    var i, ilen, label, model, state;\r\n\r\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\r\n      label = labels[i];\r\n      model = label.model();\r\n      state = label.$layout;\r\n      state._hidable = model && model.display === 'auto';\r\n      state._visible = label.visible();\r\n      dirty |= state._hidable;\r\n    }\r\n\r\n    if (dirty) {\r\n      compute(labels);\r\n    }\r\n  },\r\n\r\n  lookup: function(labels, point) {\r\n    var i, state;\r\n\r\n    // IMPORTANT Iterate in the reverse order since items at the end of\r\n    // the list have an higher z-index, thus should be picked first.\r\n\r\n    for (i = labels.length - 1; i >= 0; --i) {\r\n      state = labels[i].$layout;\r\n\r\n      if (state && state._visible && state._box.contains(point)) {\r\n        return labels[i];\r\n      }\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  draw: function(chart, labels) {\r\n    var i, ilen, label, state, geometry, center;\r\n\r\n    for (i = 0, ilen = labels.length; i < ilen; ++i) {\r\n      label = labels[i];\r\n      state = label.$layout;\r\n\r\n      if (state._visible) {\r\n        geometry = label.geometry();\r\n        center = coordinates(label._el, label.model(), geometry);\r\n        state._box.update(center, geometry, label.rotation());\r\n        label.draw(chart, center);\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nvar formatter = function(value) {\r\n  if (isNullOrUndef(value)) {\r\n    return null;\r\n  }\r\n\r\n  var label = value;\r\n  var keys, klen, k;\r\n  if (isObject(value)) {\r\n    if (!isNullOrUndef(value.label)) {\r\n      label = value.label;\r\n    } else if (!isNullOrUndef(value.r)) {\r\n      label = value.r;\r\n    } else {\r\n      label = '';\r\n      keys = Object.keys(value);\r\n      for (k = 0, klen = keys.length; k < klen; ++k) {\r\n        label += (k !== 0 ? ', ' : '') + keys[k] + ': ' + value[keys[k]];\r\n      }\r\n    }\r\n  }\r\n\r\n  return '' + label;\r\n};\r\n\r\n/**\r\n * IMPORTANT: make sure to also update tests and TypeScript definition\r\n * files (`/test/specs/defaults.spec.js` and `/types/options.d.ts`)\r\n */\r\n\r\nvar defaults = {\r\n  align: 'center',\r\n  anchor: 'center',\r\n  backgroundColor: null,\r\n  borderColor: null,\r\n  borderRadius: 0,\r\n  borderWidth: 0,\r\n  clamp: false,\r\n  clip: false,\r\n  color: undefined,\r\n  display: true,\r\n  font: {\r\n    family: undefined,\r\n    lineHeight: 1.2,\r\n    size: undefined,\r\n    style: undefined,\r\n    weight: null\r\n  },\r\n  formatter: formatter,\r\n  labels: undefined,\r\n  listeners: {},\r\n  offset: 4,\r\n  opacity: 1,\r\n  padding: {\r\n    top: 4,\r\n    right: 4,\r\n    bottom: 4,\r\n    left: 4\r\n  },\r\n  rotation: 0,\r\n  textAlign: 'start',\r\n  textStrokeColor: undefined,\r\n  textStrokeWidth: 0,\r\n  textShadowBlur: 0,\r\n  textShadowColor: undefined\r\n};\r\n\r\n/**\r\n * @see https://github.com/chartjs/Chart.js/issues/4176\r\n */\r\n\r\nvar EXPANDO_KEY = '$datalabels';\r\nvar DEFAULT_KEY = '$default';\r\n\r\nfunction configure(dataset, options) {\r\n  var override = dataset.datalabels;\r\n  var listeners = {};\r\n  var configs = [];\r\n  var labels, keys;\r\n\r\n  if (override === false) {\r\n    return null;\r\n  }\r\n  if (override === true) {\r\n    override = {};\r\n  }\r\n\r\n  options = merge({}, [options, override]);\r\n  labels = options.labels || {};\r\n  keys = Object.keys(labels);\r\n  delete options.labels;\r\n\r\n  if (keys.length) {\r\n    keys.forEach(function(key) {\r\n      if (labels[key]) {\r\n        configs.push(merge({}, [\r\n          options,\r\n          labels[key],\r\n          {_key: key}\r\n        ]));\r\n      }\r\n    });\r\n  } else {\r\n    // Default label if no \"named\" label defined.\r\n    configs.push(options);\r\n  }\r\n\r\n  // listeners: {<event-type>: {<label-key>: <fn>}}\r\n  listeners = configs.reduce(function(target, config) {\r\n    each(config.listeners || {}, function(fn, event) {\r\n      target[event] = target[event] || {};\r\n      target[event][config._key || DEFAULT_KEY] = fn;\r\n    });\r\n\r\n    delete config.listeners;\r\n    return target;\r\n  }, {});\r\n\r\n  return {\r\n    labels: configs,\r\n    listeners: listeners\r\n  };\r\n}\r\n\r\nfunction dispatchEvent(chart, listeners, label) {\r\n  if (!listeners) {\r\n    return;\r\n  }\r\n\r\n  var context = label.$context;\r\n  var groups = label.$groups;\r\n  var callback$1;\r\n\r\n  if (!listeners[groups._set]) {\r\n    return;\r\n  }\r\n\r\n  callback$1 = listeners[groups._set][groups._key];\r\n  if (!callback$1) {\r\n    return;\r\n  }\r\n\r\n  if (callback(callback$1, [context]) === true) {\r\n    // Users are allowed to tweak the given context by injecting values that can be\r\n    // used in scriptable options to display labels differently based on the current\r\n    // event (e.g. highlight an hovered label). That's why we update the label with\r\n    // the output context and schedule a new chart render by setting it dirty.\r\n    chart[EXPANDO_KEY]._dirty = true;\r\n    label.update(context);\r\n  }\r\n}\r\n\r\nfunction dispatchMoveEvents(chart, listeners, previous, label) {\r\n  var enter, leave;\r\n\r\n  if (!previous && !label) {\r\n    return;\r\n  }\r\n\r\n  if (!previous) {\r\n    enter = true;\r\n  } else if (!label) {\r\n    leave = true;\r\n  } else if (previous !== label) {\r\n    leave = enter = true;\r\n  }\r\n\r\n  if (leave) {\r\n    dispatchEvent(chart, listeners.leave, previous);\r\n  }\r\n  if (enter) {\r\n    dispatchEvent(chart, listeners.enter, label);\r\n  }\r\n}\r\n\r\nfunction handleMoveEvents(chart, event) {\r\n  var expando = chart[EXPANDO_KEY];\r\n  var listeners = expando._listeners;\r\n  var previous, label;\r\n\r\n  if (!listeners.enter && !listeners.leave) {\r\n    return;\r\n  }\r\n\r\n  if (event.type === 'mousemove') {\r\n    label = layout.lookup(expando._labels, event);\r\n  } else if (event.type !== 'mouseout') {\r\n    return;\r\n  }\r\n\r\n  previous = expando._hovered;\r\n  expando._hovered = label;\r\n  dispatchMoveEvents(chart, listeners, previous, label);\r\n}\r\n\r\nfunction handleClickEvents(chart, event) {\r\n  var expando = chart[EXPANDO_KEY];\r\n  var handlers = expando._listeners.click;\r\n  var label = handlers && layout.lookup(expando._labels, event);\r\n  if (label) {\r\n    dispatchEvent(chart, handlers, label);\r\n  }\r\n}\r\n\r\nvar plugin = {\r\n  id: 'datalabels',\r\n\r\n  defaults: defaults,\r\n\r\n  beforeInit: function(chart) {\r\n    chart[EXPANDO_KEY] = {\r\n      _actives: []\r\n    };\r\n  },\r\n\r\n  beforeUpdate: function(chart) {\r\n    var expando = chart[EXPANDO_KEY];\r\n    expando._listened = false;\r\n    expando._listeners = {};     // {<event-type>: {<dataset-index>: {<label-key>: <fn>}}}\r\n    expando._datasets = [];      // per dataset labels: [Label[]]\r\n    expando._labels = [];        // layouted labels: Label[]\r\n  },\r\n\r\n  afterDatasetUpdate: function(chart, args, options) {\r\n    var datasetIndex = args.index;\r\n    var expando = chart[EXPANDO_KEY];\r\n    var labels = expando._datasets[datasetIndex] = [];\r\n    var visible = chart.isDatasetVisible(datasetIndex);\r\n    var dataset = chart.data.datasets[datasetIndex];\r\n    var config = configure(dataset, options);\r\n    var elements = args.meta.data || [];\r\n    var ctx = chart.ctx;\r\n    var i, j, ilen, jlen, cfg, key, el, label;\r\n\r\n    ctx.save();\r\n\r\n    for (i = 0, ilen = elements.length; i < ilen; ++i) {\r\n      el = elements[i];\r\n      el[EXPANDO_KEY] = [];\r\n\r\n      if (visible && el && chart.getDataVisibility(i) && !el.skip) {\r\n        for (j = 0, jlen = config.labels.length; j < jlen; ++j) {\r\n          cfg = config.labels[j];\r\n          key = cfg._key;\r\n\r\n          label = new Label(cfg, ctx, el, i);\r\n          label.$groups = {\r\n            _set: datasetIndex,\r\n            _key: key || DEFAULT_KEY\r\n          };\r\n          label.$context = {\r\n            active: false,\r\n            chart: chart,\r\n            dataIndex: i,\r\n            dataset: dataset,\r\n            datasetIndex: datasetIndex\r\n          };\r\n\r\n          label.update(label.$context);\r\n          el[EXPANDO_KEY].push(label);\r\n          labels.push(label);\r\n        }\r\n      }\r\n    }\r\n\r\n    ctx.restore();\r\n\r\n    // Store listeners at the chart level and per event type to optimize\r\n    // cases where no listeners are registered for a specific event.\r\n    merge(expando._listeners, config.listeners, {\r\n      merger: function(event, target, source) {\r\n        target[event] = target[event] || {};\r\n        target[event][args.index] = source[event];\r\n        expando._listened = true;\r\n      }\r\n    });\r\n  },\r\n\r\n  afterUpdate: function(chart, options) {\r\n    chart[EXPANDO_KEY]._labels = layout.prepare(\r\n      chart[EXPANDO_KEY]._datasets,\r\n      options);\r\n  },\r\n\r\n  // Draw labels on top of all dataset elements\r\n  // https://github.com/chartjs/chartjs-plugin-datalabels/issues/29\r\n  // https://github.com/chartjs/chartjs-plugin-datalabels/issues/32\r\n  afterDatasetsDraw: function(chart) {\r\n    layout.draw(chart, chart[EXPANDO_KEY]._labels);\r\n  },\r\n\r\n  beforeEvent: function(chart, args) {\r\n    // If there is no listener registered for this chart, `listened` will be false,\r\n    // meaning we can immediately ignore the incoming event and avoid useless extra\r\n    // computation for users who don't implement label interactions.\r\n    if (chart[EXPANDO_KEY]._listened) {\r\n      var event = args.event;\r\n      switch (event.type) {\r\n      case 'mousemove':\r\n      case 'mouseout':\r\n        handleMoveEvents(chart, event);\r\n        break;\r\n      case 'click':\r\n        handleClickEvents(chart, event);\r\n        break;\r\n      }\r\n    }\r\n  },\r\n\r\n  afterEvent: function(chart) {\r\n    var expando = chart[EXPANDO_KEY];\r\n    var previous = expando._actives;\r\n    var actives = expando._actives = chart.getActiveElements();\r\n    var updates = utils.arrayDiff(previous, actives);\r\n    var i, ilen, j, jlen, update, label, labels;\r\n\r\n    for (i = 0, ilen = updates.length; i < ilen; ++i) {\r\n      update = updates[i];\r\n      if (update[1]) {\r\n        labels = update[0].element[EXPANDO_KEY] || [];\r\n        for (j = 0, jlen = labels.length; j < jlen; ++j) {\r\n          label = labels[j];\r\n          label.$context.active = (update[1] === 1);\r\n          label.update(label.$context);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (expando._dirty || updates.length) {\r\n      layout.update(expando._labels);\r\n      chart.render();\r\n    }\r\n\r\n    delete expando._dirty;\r\n  }\r\n};\r\n\r\nexport default plugin;\r\n"]},"metadata":{},"sourceType":"module"}